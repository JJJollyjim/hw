<!-- Source code - holy Dump udder bucket. -->

<!-- -===-===-===-===-===-===-===-===-===-===-===-===-===-===-===-===-===-===-===- -->
<!-- Congratulations on finding this! Email jamie@kwiius.com to claim your prize!  -->
<!-- -===-===-===-===-===-===-===-===-===-===-===-===-===-===-===-===-===-===-===- -->

<!DOCTYPE html> 
<html>
	<head>
		<!--<script src="http://192.168.2.50:8080/target/target-script-min.js#anonymous"></script>-->
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1"> 

		<title>hDub - Dev</title> 

		<link rel="stylesheet" href="styles/theme.css" />
  	<link rel="stylesheet" href="styles/jquery.mobile.structure-1.2.0.min.css" /> 
		<link rel="stylesheet" href="styles/jqm-datebox.min.css" /> 

		<script src="scripts/jquery-1.8.2.min.js"></script> 
  	<script src="scripts/jquery.mobile-1.2.0.min.js"></script> 
		<script src="scripts/jqm-datebox.core.min.js"></script>
		<script src="scripts/jqm-datebox.mode.calbox.min.js"></script>
		<script src="scripts/jquery.mobile.datebox.i18n.en_US.utf8.js"></script>
		<script src="scripts/modernizr.js"></script>
		<script>

			/*
			
				   d88b  .d8b.  db    db  .d8b.  .d8888.  .o88b. d8888b. d888888b d8888b. d888888b 
				   `8P' d8' `8b 88    88 d8' `8b 88'  YP d8P  Y8 88  `8D   `88'   88  `8D `~~88~~' 
				    88  88ooo88 Y8    8P 88ooo88 `8bo.   8P      88oobY'    88    88oodD'    88    
				    88  88~~~88 `8b  d8' 88~~~88   `Y8b. 8b      88`8b      88    88~~~      88    
				db. 88  88   88  `8bd8'  88   88 db   8D Y8b  d8 88 `88.   .88.   88         88    
				Y8888P  YP   YP    YP    YP   YP `8888Y'  `Y88P' 88   YD Y888888P 88         YP    
				                                                                                   
				                                                                                   
			 */
			
			
			var firstInit = true;
			var onPage = 1;
			var day = 0;
			var l = localStorage;
			var id;
			var todayClasses;
			var todayHW;
			var dayHasSubjects;
			var editDayHasSubjects;
			var firstCDV = true;
			var setPD = 0;

			if(l.loggedIn != 1) {
				//console.log("LOGIN");
			}
			
			if(l.dateHW == undefined) {
				l.dateHW = "{}";
			}
			
			//l.dateClasses = '{}';

			var days = {0: "Sun", 1: "Mon", 2: "Tue", 3: "Wed", 4: "Thu", 5: "Fri", 6: "Sat"};
			var supertexts = {1: "st", 2: "nd", 3: "rd", 4: "th", 5: "th", 6: "th", 7: "th", 8: "th", 9: "th", 10: "th", 11: "th", 12: "th", 13: "th", 14: "th", 15: "th", 16: "th", 17: "th", 18: "th", 19: "th", 20: "th", 21: "st", 22: "nd", 23: "rd", 24: "th", 25: "th", 26: "th", 27: "th", 28: "th", 29: "th", 30: "th", 31: "st"};
			var months = {0: "Jan", 1: "Feb", 2: "Mar", 3: "Apr", 4: "May", 5: "Jun", 6: "Jul", 7: "Aug", 8: "Sep", 9: "Oct", 10: "Nov", 11: "Dec"};
			var fullMonths = {0: "Janurary", 1: "Feburary", 2: "March", 3: "April", 4: "May", 5: "June", 6: "July", 7: "August", 8: "September", 9: "October", 10: "November", 11: "December"};
			var template = [{"type":"class", "period":"1"}, {"type":"class", "period":"2"}, {"type":"break", "name":"Form Time & Interval"}, {"type":"class", "period":"3"}, {"type":"class", "period":"4"}, {"type":"break", "name":"Lunchtime"}, {"type":"class", "period":"5"}, {"type":"class", "period":"6"}];
			var pdTimes = {1: {1: [525,575], 2: [575,625], 3: [660,710], 4: [710,760], 5: [820,870], 6: [870,920]}}

			function genDate(d) {
				n = new Date;
				n = resetHrs(n);
				d = resetHrs(d);
				nt = n.getTime()/86400000;
				dt = d.getTime()/86400000;
				if(dt == nt) {
					return "Today";
				} else if (dt+1 == nt) {
					return "Yesterday";
				} else if (dt-1 == nt) {
					return "Tomorrow";
				} else if (d.getMonth() == n.getMonth()) {
					return days[d.getDay()] + " " + d.getDate();
				} else {
					return days[d.getDay()] + " " + d.getDate() + " " + months[d.getMonth()];
				}
			}

			function genStoreDate(d) {
				return d.getFullYear()+"-"+twoDigits(d.getMonth()+1)+"-"+twoDigits(d.getDate());
			}

			function twoDigits(d) {
		    if(0 <= d && d < 10) return "0" + d.toString();
		    if(-10 < d && d < 0) return "-0" + (-1*d).toString();
		    return d.toString();
			}

			function sortOBJ(o) {
				keys = Object.keys(o);
    		len = keys.length;
    		out = {};

				keys.sort();

				for (i = 0; i < len; i++) {
				  k = keys[i];
				  out[k] = o[k];
				}

				return out;
			}

			function checkDayValidity() {
				d = new Date;
				d.setTime(d.getTime()+86400000*day);

				if(d.getDay() == 0) {
					if(!firstCDV) {
						day=day-2;
					} else {
						day=day+1;
					}
				} else if(d.getDay() == 6) {
					day=day+2;
				}

				if(d.getFullYear() != 2013) {
					d.setFullYear(2013);
					genDay(d);
				}

				if(firstCDV) {
					firstCDV = false;
				}
			}

			function genDay(d) {
				n = new Date;
				n = resetHrs(n);
				d = resetHrs(d);

				day = d.getTime()/86400000+1 - n.getTime()/86400000;
			}

			function resetHrs(d) {
				d.setUTCMilliseconds(0);
				d.setUTCSeconds(0);
				d.setUTCMinutes(0);
				if(d.getHours() < Math.abs(d.getTimezoneOffset())/60) {
					d.setUTCHours(24);
				} else {
					d.setUTCHours(0)
				}
				return d;
			}

			function prvDay() {
				day--;

				if($.mobile.activePage.attr("id") == "pg1") {
					$.mobile.changePage("#pg2", {transition: "slide", reverse: true});
				} else if($.mobile.activePage.attr("id") == "pg2") {
					$.mobile.changePage("#pg1", {transition: "slide", reverse: true});
				}				
			}

			function nxtDay() {
				day++;

				if($.mobile.activePage.attr("id") == "pg1") {
					$.mobile.changePage("#pg2", {transition: "slide"});
				} else if($.mobile.activePage.attr("id") == "pg2") {
					$.mobile.changePage("#pg1", {transition: "slide"});
				}
			}

			function updateTitle() {
				d = new Date;
				d.setTime(d.getTime()+86400000*day);
				$(".dayTitle").text(genDate(d));
			}

			function dateFromStore(s) {
				spl = s.split("-");
				return new Date(spl[0], parseInt(spl[1])-1, spl[2]);
			}

			function updateHWSubjects() {
				d = $("#hwDateBox").datebox("getTheDate");
				storeDate = genStoreDate(d);
				parsed = JSON.parse(l.dateClasses);
				if(parsed[storeDate] != undefined) {
					$("#noSubjects").hide();
					$("#subjectSelect").show();
					$("#taskInput").removeClass("ui-disabled");
					$("#detailInput").removeClass("ui-disabled");
					$("#hwSubmit").removeClass("ui-disabled");
					dayHasSubjects = true;
					classes = parsed[storeDate];
					for (var i=1; i<7; i++) {
						$("#subjectlabel-"+i).find(".ui-btn-text").text(classes[i].name);
						$("#subject-"+i).checkboxradio("refresh");
					}
					if(setPD != 0) {
						$("#subject-"+setPD).attr("checked", true).checkboxradio("refresh");
						$("#subject-1").checkboxradio("refresh");
					}
				} else {
					$("#noSubjects").show();
					$("#subjectSelect").hide();
					$("#taskInput").addClass("ui-disabled");
					$("#detailInput").addClass("ui-disabled");
					$("#hwSubmit").addClass("ui-disabled");
					dayHasSubjects = false;
				}
			}

			function updateClassPage(clicked) {
				dcl = JSON.parse(l.dateClasses);
				dhw = JSON.parse(l.dateHW);
				date = $(clicked).data("date");
				period = $(clicked).data("period");
				jsDate = dateFromStore(date);
				info = dcl[date][period];

				$("#classDataStore").data("date", date);
				$("#classDataStore").data("period", period);

				$("#className").text(info["name"]+":");
				$("#classDate").html("<b>Date:</b> "+jsDate.getDate()+"<sup>"+supertexts[jsDate.getDate()]+"</sup> "+fullMonths[jsDate.getMonth()]);
				$("#classPeriod").html("<b>Period:</b> "+period);
				if(dhw[date] != undefined) {
					if(dhw[date][period] != undefined) {
						if(dhw[date][period].length > 0) {
							html = "<h4>Homework:</h4>";
							
							num = 0;
							$(dhw[date][period]).each(function() {
								html += '<div class="ui-body ui-body-d classHWItem" data-date="'+date+'" data-period="'+period+'"" data-num="'+num+'">';

								html += '<h3>'+dhw[date][period][num]["name"]+':</h3>';
								if(dhw[date][period][num]["details"] != "" && dhw[date][period][num]["details"] != " ") {
									html += '<p>'+dhw[date][period][num]["details"]+'</p>';
								}

								html += '<div class="ui-grid-b">';
									html += '<div class="ui-block-a switchaa"><a href="#" class="classHWButton classHWEditButton" data-role="button" data-theme="c">Edit</a></div>';
									html += '<div class="ui-block-b switchab"><a href="#" class="classHWButton classHWDelButton" data-role="button" data-theme="c">Delete</a></div>';
									html += '<div class="ui-block-c switchac"><a href="#" class="classHWButton classHWViewButton" data-role="button" data-theme="c">View</a></div>';
								html += '</div>'

								html += '</div><br/>';
								num++;
							});

							$("#classHW").html(html);
							$(".classHWButton").button();
						} else {
							$("#classHW").html("<b>Homework:</b> No homework");
						}
					} else {
						$("#classHW").html("<b>Homework:</b> No homework");
					}
				} else {
					$("#classHW").html("<b>Homework:</b> No homework");
				}

				setPD = period;

				$.mobile.changePage("#classdetail", {transition: "pop"});
			}

			function updateEditHWSubjects() {
				d = $("#hwEditDateBox").datebox("getTheDate");
				storeDate = genStoreDate(d);
				parsed = JSON.parse(l.dateClasses);
				if(parsed[storeDate] != undefined) {
					$("#noEditSubjects").hide();
					$("#subjectEditSelect").show();
					$("#taskEditInput").removeClass("ui-disabled");
					$("#detailEditInput").removeClass("ui-disabled");
					$("#hwEditSubmit").removeClass("ui-disabled");
					editDayHasSubjects = true;
					classes = parsed[storeDate];
					for (var i=1; i<7; i++) {
						$("#subjectlabel-edit-"+i).find(".ui-btn-text").text(classes[i].name);
						$("#subject-edit-"+i).checkboxradio("refresh");
					}
				} else {
					$("#noEditSubjects").show();
					$("#subjectEditSelect").hide();
					$("#taskEditInput").addClass("ui-disabled");
					$("#detailEditInput").addClass("ui-disabled");
					$("#hwEditSubmit").addClass("ui-disabled");
					editDayHasSubjects = false;
				}
			}

			function addHomework() {
				if(dayHasSubjects && $("#taskInput").val() != "" && $("#taskInput").val() != " ") {
					//console.log("HW Submit!", $("#hwDateBox").datebox("getTheDate"), $(".subjectChoice:checked").val(), $("#taskInput").val(), $("#detailInput").val());
					storeDate = genStoreDate($("#hwDateBox").datebox("getTheDate"));
					classes = JSON.parse(l.dateClasses)[storeDate];
					dhw = JSON.parse(l.dateHW);
					classnum = parseInt($(".subjectChoice:checked").val().substr(8));

					if(dhw[storeDate] == undefined) {
						dhw[storeDate] = {};
					}

					if(dhw[storeDate][classnum] == undefined) {
						dhw[storeDate][classnum] = [];
					}

					dhw[storeDate][classnum].push({name: $("#taskInput").val(), details: $("#detailInput").val()});

					l.dateHW = JSON.stringify(dhw);
					$.mobile.changePage("#hw", {transition: "pop", reverse: true});
					setTimeout(function() {
						$("#taskInput").val("");
						$("#detailInput").val("");
					}, 300);
				}
			}

			function updateHWPage() {
				dhw = JSON.parse(l.dateHW);
				dhw = sortOBJ(dhw);
				dcl = JSON.parse(l.dateClasses);
				html = "";
				if($(".hwSortBtn.ui-btn-active").length == 2) {
					$("#classSortBtn").removeClass("ui-btn-active");
				} else if($(".hwSortBtn.ui-btn-active").length == 0) {
					$("#dateSortBtn").addClass("ui-btn-active");
				}
				allhwcount = 0;
				if($(".hwSortBtn.ui-btn-active").attr("id") == "dateSortBtn") {
					for (key in dhw) {
						dhtml = "";
						hwcount = 0;
						for (key2 in dhw[key]) {
							for (key3 in dhw[key][key2]) {
								dhtml += '<li class="hwListItem" data-date='+key+' data-period='+key2+' data-num='+key3+'><a href="#hwdetail" class="hwListItemLink">';
								dhtml += '<h3>'+dhw[key][key2][key3]["name"]+'</h3>';
								dhtml += '<p>'+dcl[key][key2]["name"]+' (Period '+key2+')</p>';
								dhtml += '</a></li>';
								hwcount++;
								allhwcount++;
							}
						}

						if(hwcount > 0) {
							html += '<li data-role="list-divider">'+genDate(dateFromStore(key))+' <span class="ui-li-count">'+hwcount+'</span></li>';
						}
						html += dhtml;
					}
				} else {
					tempConstruct = [];
					for (key in dhw) {
						for (key2 in dhw[key]) {
							for (key3 in dhw[key][key2]) {
								className = dcl[key][key2]["name"];
								if(tempConstruct[className] == undefined) {
									tempConstruct[className] = [];
								}
								tempConstruct[className].push({date:key, period:key2, num:key3});
							}
						}
					}

					for(key4 in tempConstruct) {
						chtml = "";
						hwcount = 0;
						for(key5 in tempConstruct[key4]) {
							tc = tempConstruct[key4][key5];
							
							chtml += '<li class="hwListItem" data-date='+tc["date"]+' data-period='+tc["period"]+' data-num='+tc["num"]+'><a href="#hwdetail">';
							chtml += '<h3>'+dhw[tc["date"]][tc["period"]][tc["num"]]["name"]+'</h3>';
							chtml += '<p>'+genDate(dateFromStore(tc["date"]))+' (Period '+tc["period"]+')</p>';
							chtml += '</a></li>';

							hwcount++;
							allhwcount++;
						}
						html += '<li data-role="list-divider">'+key4+' <span class="ui-li-count">'+hwcount+'</span></li>';
						html += chtml;
					}
				}

				if(allhwcount == 0) {
					html = "<center><p><br>No homework here! Click the \"+ Homework\" button in the top right of the screen to add some. </p><p>Alternatively, why not ask your teacher to set you some more? :-P</p></center>";
				}
				
				$("#hwList").html(html);
				if(allhwcount != 0) {
					$("#hwList").listview("refresh");
				}
			}

			function updateTTPage() {
				d = new Date;
				d.setTime(d.getTime()+86400000*day);

				t = new Date();
				resetHrs(d);
				resetHrs(t);
				isToday = (t.getTime() == d.getTime());
				
				var storeDate = genStoreDate(d);
				
				var html = "";
				todayClasses = JSON.parse(l.dateClasses)[storeDate];
				todayHW = JSON.parse(l.dateHW)[storeDate];

				if(todayClasses != undefined) {
					$(template).each(function(){
						if(this.type == "class") {
							n = new Date();
							now = n.getHours()*60+n.getMinutes();
							isNow = (now>=pdTimes[1][this.period][0] && now < pdTimes[1][this.period][1]);

							if(isToday && isNow) {
								html += '<div class="ui-body ui-body-b nowSubject ttItem" data-date="'+storeDate+'" data-period="'+this.period+'">';
							} else {
								html += '<div class="ui-body ui-body-c ttItem" data-date="'+storeDate+'" data-period="'+this.period+'">';
							}

							html += '<h3 class="subjectTitle">'+todayClasses[this.period].name+'</h3>';

							if(isToday && isNow) {
								html += '<h5 class="currentSubject">Current Subject</h5>';
							} else {
								html += '<h4 class="subjectTime">Period '+this.period+'</h4>';
							}

							if(todayHW != undefined) {
								if (todayHW[this.period] != undefined) {
									html += '<ul>';
										$(todayHW[this.period]).each(function() {
											html += '<li>'+this.name+'</li>';
										})
									html += '</ul>';
								}
							}

							html += '</div>';
						} else if(this.type == "break") {
							html += "<p><i>"+this.name+"</i></p>";
						}
					});

					$("#"+id).find(".classList").html(html);
				} else {
					$("#"+id).find(".classList").html("<p>No classes today!</p>");
				}
			}

			function delHW() {
				dhw = JSON.parse(l.dateHW);
				date = $("#hwDataStore").data("date");
				period = $("#hwDataStore").data("period");
				num = $("#hwDataStore").data("num");

				if(confirm("Delete homework item '"+dhw[date][period][num]["name"]+"'?")) {
					dhw[date][period].splice(num, 1);
					l.dateHW = JSON.stringify(dhw);
					$.mobile.changePage("#hw", {reverse: true});
				}
			}

			function delClassHW(linkParent) {
				dhw = JSON.parse(l.dateHW);
				date = linkParent.data("date");
				period = linkParent.data("period");
				num = linkParent.data("num");

				if(confirm("Delete homework item '"+dhw[date][period][num]["name"]+"'?")) {
					dhw[date][period].splice(num, 1);
					l.dateHW = JSON.stringify(dhw);
					updateClassPage();
				}
			}

			function editHW() {
				dhw = JSON.parse(l.dateHW);

				$("#hwDisplaySection").hide();
				$("#hwEditSection").show();

				sd = $("#hwDataStore").data("date");
				d = dateFromStore(sd);
				$('#hwEditDateBox').val(twoDigits(d.getDate())+"/"+twoDigits(d.getMonth()+1)+"/"+d.getFullYear());
				$("#hwEditDateBox").datebox("setTheDate", d);

				updateEditHWSubjects();

				period = $("#hwDataStore").data("period");
				$("#subject-edit-"+period).attr("checked", true);
				$(".subjectEditChoice").checkboxradio("refresh");

				num = $("#hwDataStore").data("num");
				$("#taskEditInput").val(dhw[sd][period][num]["name"]);
				$("#detailEditInput").val(dhw[sd][period][num]["details"]);
			}

			function noEditHW() {
				$("#hwDisplaySection").show();
				$("#hwEditSection").hide();	
			}

			function saveHWEdits() {
				dhw = JSON.parse(l.dateHW);
				
				date = $("#hwDataStore").data("date");
				period = $("#hwDataStore").data("period");
				num = $("#hwDataStore").data("num");

				dhw[date][period].splice(num, 1);

				jsDate = $("#hwEditDateBox").datebox("getTheDate");
				date = genStoreDate(jsDate);
				period = parseInt($(".subjectEditChoice:checked").val().substr(13));

				if(dhw[date] == undefined) {
					dhw[date] = {};
				}

				if(dhw[date][period] == undefined) {
					dhw[date][period] = [];
				}

				dhw[date][period].push({name: $("#taskEditInput").val(), details: $("#detailEditInput").val()});

				l.dateHW = JSON.stringify(dhw);	

				$.mobile.changePage("#hw", {transition: "pop", reverse: true});
			}

			$(document).bind('pageshow', function(e) {
				id = e.target.id;
				//console.log("Page shown with target ID of "+id);
				if(id == "goto") {
					$("#gotoDateBox").datebox("open");
				}
			});

			$(document).bind('pagebeforeshow', function(e) {
				checkDayValidity();
				updateTitle();
				id = e.target.id;
				//console.log("Page pre-shown with target ID of "+id);

				if(id == "goto") {
					d = new Date;
					d.setTime(d.getTime()+86400000*day);
					$('#gotoDateBox').val(twoDigits(d.getDate())+"/"+twoDigits(d.getMonth()+1)+"/"+d.getFullYear());
				}

				if(id == "hw") {
					updateHWPage();
				}

				if(id == "addhw") {
					d = new Date;
					d.setTime(d.getTime()+86400000*day);
					$('#hwDateBox').val(twoDigits(d.getDate())+"/"+twoDigits(d.getMonth()+1)+"/"+d.getFullYear());
					$('#hwDateBox').datebox("setTheDate", d);
					updateHWSubjects();
				}

				if(id == "pg1" || id == "pg2") {
					updateTTPage();
				}
			});

			$(document).bind('pageinit', function(e) {
				id = e.target.id;
				//console.log("Page initiated with target ID of "+id);

				if(firstInit) {
					if(!Modernizr.touch) {
						$(".np-page").show();
					} else {
						$(".np-page").hide();
					}

					$("#gotoButton").click(function() {
						genDay($("#gotoDateBox").datebox('getTheDate'));
					});

					$('body').bind('swiperight', function() { prvDay(); });
					$('body').bind('swipeleft' , function() { nxtDay(); });

					$(".prvDay").click(function(){ prvDay(); });
					$(".nxtDay").click(function(){ nxtDay(); });

					$("#hwDateBox").bind("datebox", function(e,p){
						if(p.method === "set") {
							updateHWSubjects();
						}
					});

					$("#hwEditDateBox").bind("datebox", function(e,p){
						if(p.method === "set") {
							updateEditHWSubjects();
						}
					});

					$(".hwListItem").live("click", function() {
						noEditHW();

						dhw = JSON.parse(l.dateHW);
						dcl = JSON.parse(l.dateClasses);
						
						date = $(this).data("date");
						period = $(this).data("period");
						num = $(this).data("num");

						$("#hwDataStore").data("date", date);
						$("#hwDataStore").data("period", period);
						$("#hwDataStore").data("num", num);
						
						jsDate = dateFromStore(date);
						info = dhw[date][period][num];

						$("#hwDName").text(info["name"]+":");
						$("#hwDSubject").html("<b>Subject:</b> "+dcl[date][period]["name"]);
						$("#hwDDue").html("<b>Due Date:</b> "+jsDate.getDate()+"<sup>"+supertexts[jsDate.getDate()]+"</sup> "+fullMonths[jsDate.getMonth()]);
						$("#hwDDesc").html(info["details"]);

						if(info["details"] != "" && info["details"] != " ") {
							$("#hwDDesc").show();
						} else {
							$("#hwDDesc").hide();
						}
					});

					$(".ttItem").live("click", function() {
						updateClassPage(this);
					});

					$(".classHWEditButton").live("click", function() {
						console.log("edit");
					});

					$(".classHWDelButton").live("click", function() {
						console.log("delete");
						delClassHW($(this).parent().parent().parent());
					});

					$("#hwDelButton").click(function() {
						delHW();
					});

					$("#hwEditButton").click(function() {
						editHW();
					});

					$("#hwEditCancelButton").click(function() {
						noEditHW();
					});

					$(".hwSortBtn").click(function () {
						if($(this).attr("id") == $(".hwSortBtn.ui-btn-active").attr("id")) {
							setTimeout("updateHWPage()", 500);
						}
						updateHWPage();
					});

					$(window).resize(function() {
						//console.log($(window).width());
					});

					firstInit = false;
				}
			});

			//$(".ui-body").toggleClass("ui-body-c");$(".ui-body").toggleClass("ui-body-b");$(".ui-body").toggleClass("nowSubject");
		</script>
		<!--
			 .o88b. .d8888. .d8888. 
			d8P  Y8 88'  YP 88'  YP 
			8P      `8bo.   `8bo.   
			8b        `Y8b.   `Y8b. 
			Y8b  d8 db   8D db   8D 
			 `Y88P' `8888Y' `8888Y' 
			                        -->

		<style type="text/css">
			.no-blue .ui-btn-active {
				border:1px solid #111;
				background:#333;
				font-weight:bold;
				color:#fff;
				text-shadow:0 1px 1px #111;
				background-image:-webkit-gradient(linear,left top,left bottom,from(#444),to(#2d2d2d));
				background-image:-webkit-linear-gradient(#444,#2d2d2d);
				background-image:-moz-linear-gradient(#444,#2d2d2d);
				background-image:-ms-linear-gradient(#444,#2d2d2d);
				background-image:-o-linear-gradient(#444,#2d2d2d);
				background-image:linear-gradient(#444,#2d2d2d);
			}

			.no-blue .ui-btn-hover-a {
				border:1px solid #000;
				background:#444;
				font-weight:bold;
				color:#fff;
				text-shadow:0 1px 1px #111;
				background-image:-webkit-gradient(linear,left top,left bottom,from(#555),to(#383838));
				background-image:-webkit-linear-gradient(#555,#383838);
				background-image:-moz-linear-gradient(#555,#383838);
				background-image:-ms-linear-gradient(#555,#383838);
				background-image:-o-linear-gradient(#555,#383838);
				background-image:linear-gradient(#555,#383838);
			}

			.input { outline: none; }

			.nav-glyphish-example .ui-btn .ui-btn-inner { padding-top: 40px !important; }
			.nav-glyphish-example .ui-btn .ui-icon { width: 30px!important; height: 30px!important; margin-left: -15px !important; box-shadow: none!important; -moz-box-shadow: none!important; -webkit-box-shadow: none!important; -webkit-border-radius: 0 !important; border-radius: 0 !important; }
			.email .ui-icon { background:  url(glyphish-icons/83-calendar.png) 50% 50% no-repeat; background-size: 23px 25px;  }
			.coffee .ui-icon { background:  url(glyphish-icons/179-notepad.png) 50% 50% no-repeat;  background-size: 22px 28px; }
			.skull .ui-icon { background:  url(glyphish-icons/95-equalizer.png) 50% 50% no-repeat;  background-size: 26px 24px; }

			.subjectTitle {
				margin-top: 5px;
				margin-bottom: 5px;
				color: #111;
			}

			.subjectTime {
				margin-top: 0px;
				margin-bottom: 5px;
				font-size: 16px;
				font-style: italic;
				color: #444;
			}

			.nowSubject .currentSubject {
				display: block;
				margin-top: 0px !important;
				margin-bottom: 5px !important;
			}

			.in, .out {
		    -webkit-animation-duration: 250ms !important;
			}

			.ttItem {
				margin-bottom: 10px;
			}

			#detailInput {
				resize: none;
			}

			#hwEditSection {
				display: none;
			}
		</style>

	</head>
	<body>

	<!--
	db   db db   d8b   db   d8888b.  .d8b.   d888b  d88888b    db 
	88   88 88   I8I   88   88  `8D d8' `8b 88' Y8b 88'       o88 
	88ooo88 88   I8I   88   88oodD' 88ooo88 88      88ooooo    88 
	88~~~88 Y8   I8I   88   88~~~   88~~~88 88  ooo 88~~~~~    88 
	88   88 `8b d8'8b d8'   88      88   88 88. ~8~ 88.        88 
	YP   YP  `8b8' `8d8'    88      YP   YP  Y888P  Y88888P    VP 
	                                                              -->
	<div data-role="page" id="pg1" data-theme="d">
		<div data-role="header" data-theme="a" data-position="fixed" data-tap-toggle="false" data-id="linked">
			<a href="#goto" data-icon="grid" data-rel="dialog" data-transition="pop">Go to</a>
			<h1 class="dayTitle">Today</h1>
			<a href="#addhw" data-icon="plus" class="ui-btn-right">Homework</a>
			<div data-role="navbar" class="np-page no-blue">
				<ul>
					<li><a href="#" class="prvDay">Previous Day</a></li>
					<li><a href="#" class="nxtDay">Next Day</a></li>
				</ul>
			</div>
		</div>

		<div data-role="content" data-theme="d" class="classList">
			<p>Error loading content. If this is a common error, please email <a href="mailto:jamie@kwiius.com">jamie@kwiius.com</a></p>
		</div><br /><br /><br />
		
		<div data-role="footer" class="nav-glyphish-example" data-theme="a" data-position="fixed" data-tap-toggle="false" data-id="linkedf">
			<div data-role="navbar" class="nav-glyphish-example" data-grid="b">
			<ul>
				<li><a href="#" data-icon="custom" data-transition="none" class="ui-btn-active ui-state-persist email">Timetable</a></li>
				<li><a href="#hw" class="coffee" data-icon="custom" data-transition="none">Homework</a></li>
				<li><a href="#settings" class="skull" data-icon="custom" data-transition="none">Settings</a></li>
			</ul>
			</div>
		</div>
	</div>

	<!--
		db   db db   d8b   db   d8888b.  .d8b.   d888b  d88888b   .d888b. 
		88   88 88   I8I   88   88  `8D d8' `8b 88' Y8b 88'       VP  `8D 
		88ooo88 88   I8I   88   88oodD' 88ooo88 88      88ooooo      odD' 
		88~~~88 Y8   I8I   88   88~~~   88~~~88 88  ooo 88~~~~~    .88'   
		88   88 `8b d8'8b d8'   88      88   88 88. ~8~ 88.       j88.    
		YP   YP  `8b8' `8d8'    88      YP   YP  Y888P  Y88888P   888888D                                                        
 																																			-->
		                                        
	<div data-role="page" id="pg2" data-theme="d">
		<div data-role="header" data-theme="a" data-position="fixed" data-tap-toggle="false" data-id="linked">
			<a href="#goto" data-icon="grid" data-rel="dialog" data-transition="pop">Go to</a>
			<h1 class="dayTitle">Today</h1>
			<a href="#addhw" data-icon="plus" class="ui-btn-right">Homework</a>
			<div data-role="navbar" class="np-page no-blue">
				<ul>
					<li><a href="#" class="prvDay">Previous Day</a></li>
					<li><a href="#" class="nxtDay">Next Day</a></li>
				</ul>
			</div>
		</div>

		<div data-role="content" data-theme="d" class="classList">
			<p>Error loading content. If this is error occours often, please email <a href="mailto:jamie@kwiius.com">jamie@kwiius.com</a></p>
		</div><br /><br /><br />
		
		<div data-role="footer" class="nav-glyphish-example" data-theme="c" data-position="fixed" data-tap-toggle="false" data-id="linkedf">
			<div data-role="navbar" class="nav-glyphish-example" data-grid="b">
			<ul>
				<li><a href="#" data-icon="custom" data-transition="none" class="ui-btn-active ui-state-persist email">Timetable</a></li>
				<li><a href="#hw" class="coffee" data-icon="custom" data-transition="none">Homework</a></li>
				<li><a href="#settings" class="skull" data-icon="custom" data-transition="none">Settings</a></li>
			</ul>
			</div>
		</div>
	</div>


	<!--
		db       .d88b.   d888b  d888888b d8b   db 
		88      .8P  Y8. 88' Y8b   `88'   888o  88 
		88      88    88 88         88    88V8o 88 
		88      88    88 88  ooo    88    88 V8o88 
		88booo. `8b  d8' 88. ~8~   .88.   88  V888 
		Y88888P  `Y88P'   Y888P  Y888888P VP   V8P 
		                                            -->
	<div data-role="page" id="login" data-theme="d">
		<div data-role="header" data-theme="a" data-position="fixed" data-tap-toggle="false">
			<h1>hDub Login</h1>
		</div>

		<div data-role="content" data-theme="d">
			<div class="ui-body ui-body-c">
				<h2>Welcome to hDub! You need to log in:</h2>
		    <label for="sid">Student ID Number:</label>
		    <input type="number" maxlength="6" min="100000" max="999999" value="hi" name="sid" id="sid" />
		    <label for="pass">Access Code:</label>
		    <input type="password" maxlength="4" name="pass" id="pass" />
		    <input type="submit" data-theme="b" value="Sign in &raquo;" />

		    <p>You should have received an email to your school address at the start of Term 1 with details on this app, along with your access code.<br/>
		    If you didn't, or you lost your code, please visit <a href="hdub.kwiius.com" title="The hDub website">hdub.kwiius.com</a> and follow the instructions.</p>
		    <p>You will only need to log in once on each device. You can log out in the settings screen.</p>
			</div>
		</div>
	</div>

	<!--
		db   db db   d8b   db    db      d888888b .d8888. d888888b 
		88   88 88   I8I   88    88        `88'   88'  YP `~~88~~' 
		88ooo88 88   I8I   88    88         88    `8bo.      88    
		88~~~88 Y8   I8I   88    88         88      `Y8b.    88    
		88   88 `8b d8'8b d8'    88booo.   .88.   db   8D    88    
		YP   YP  `8b8' `8d8'     Y88888P Y888888P `8888Y'    YP    
													 																		-->
	<div data-role="page" id="hw" data-theme="d">

		<div data-role="header" data-theme="a" data-position="fixed" data-tap-toggle="false" data-id="linked">
			<h1>Homework</h1>
			<a href="#addhw" data-icon="plus" class="ui-btn-right">Homework</a>
			<div data-role="navbar">
				<ul>
					<li><a href="#" id="dateSortBtn" class="ui-btn-active ui-state-persist hwSortBtn">Sort by Date</a></li>
					<li><a href="#" class="hwSortBtn" id="classSortBtn">Sort by Class</a></li>
				</ul>
			</div>
		</div>

		<div data-role="content" data-theme="d">	
			<ul data-role="listview" data-divider-theme="c" id="hwList">
				<p>Error loading data</p>
			</ul>
		</div>
		
		<div data-role="footer" class="nav-glyphish-example" data-theme="c" data-position="fixed" data-tap-toggle="false" data-id="linkedf">
			<div data-role="navbar" class="nav-glyphish-example" data-grid="b">
			<ul>
				<li><a href="#pg1" class="email" data-icon="custom" data-transition="none">Timetable</a></li>
				<li><a href="#" data-icon="custom" data-transition="none" class="ui-btn-active ui-state-persist coffee">Homework</a></li>
				<li><a href="#settings" class="skull" data-icon="custom" data-transition="none">Settings</a></li>
			</ul>
			</div>
		</div>
	</div>

	<!--
		.d8888. d88888b d888888b d888888b d888888b d8b   db  d888b  .d8888. 
		88'  YP 88'     `~~88~~' `~~88~~'   `88'   888o  88 88' Y8b 88'  YP 
		`8bo.   88ooooo    88       88       88    88V8o 88 88      `8bo.   
		  `Y8b. 88~~~~~    88       88       88    88 V8o88 88  ooo   `Y8b. 
		db   8D 88.        88       88      .88.   88  V888 88. ~8~ db   8D 
		`8888Y' Y88888P    YP       YP    Y888888P VP   V8P  Y888P  `8888Y' 
																																				-->

	<div data-role="page" id="settings" data-theme="d">
		<div data-role="header" data-theme="a" data-position="fixed" data-tap-toggle="false" data-id="linked">
			<h1>Homework</h1>
		</div>

		<div data-role="content" data-theme="d">	
			<h2>Settings</h2>
			<p>DOES HYDRA EVEN WORK!?!</p>		
			<p><a href="#login" data-role="button" data-transition="pop">Login</a></p>
			<p><a href="#pg1" data-rel="back" data-role="button" data-inline="true" data-icon="back">Back to page "pg1"</a></p>	
		</div>
		
		<div data-role="footer" class="nav-glyphish-example" data-theme="c" data-position="fixed" data-tap-toggle="false" data-id="linkedf">
			<div data-role="navbar" class="nav-glyphish-example" data-grid="b">
			<ul>
				<li><a href="#pg1" class="email" data-icon="custom" data-transition="none">Timetable</a></li>
				<li><a href="#" class="coffee" data-icon="custom" data-transition="none">Homework</a></li>
				<li><a href="#" data-icon="custom" data-transition="none" class="ui-btn-active ui-state-persist skull">Settings</a></li>
			</ul>
			</div>
		</div>
	</div>

	<!--
		 d888b   .d88b.  d888888b  .d88b.  
		88' Y8b .8P  Y8. `~~88~~' .8P  Y8. 
		88      88    88    88    88    88 
		88  ooo 88    88    88    88    88 
		88. ~8~ `8b  d8'    88    `8b  d8' 
		 Y888P   `Y88P'     YP     `Y88P'  
																			 -->

	<div data-role="dialog" id="goto">
		<div data-role="header" data-theme="a">
			<h1>Goto Date</h1>
		</div>

		<div data-role="content" data-theme="c">
			<p>Click in the box below to select a date to naviage to:</p>
			<label for="gotoDateBox" class="ui-hidden-accessible">Goto Date</label>
			<input name="gotoDateBox" id="gotoDateBox" type="date" data-role="datebox" min="2013-01-01" max="2013-12-31" placeholder="dd/mm/yyyy" data-options='{"mode": "calbox", "useTodayButton": true, "overrideDateFormat": "%d/%m/%Y", "useFocus": true, "useButton": false, "blackDays": [0,6]}'>
			<p><a href="#pg1" id="gotoButton" data-rel="back" data-role="button" data-inline="true" data-icon="arrow-r" data-theme="b">Go</a></p>
		</div>
	</div>

	<!--
			 .d8b.  d8888b. d8888b.   db   db db   d8b   db 
			d8' `8b 88  `8D 88  `8D   88   88 88   I8I   88 
			88ooo88 88   88 88   88   88ooo88 88   I8I   88 
			88~~~88 88   88 88   88   88~~~88 Y8   I8I   88 
			88   88 88  .8D 88  .8D   88   88 `8b d8'8b d8' 
			YP   YP Y8888D' Y8888D'   YP   YP  `8b8' `8d8'  
																											-->
	<div data-role="dialog" id="addhw">

		<div data-role="header" data-theme="a">
			<h1>Add Homework</h1>
		</div>

		<div data-role="content" data-theme="c">	
			<form action="javascript:addHomework()" method="post" id="hwForm">
				<div data-role="fieldcontain">
					 <label for="hwDateBox">Due Date:</label>
					 <input name="hwDateBox" id="hwDateBox" type="date" data-role="datebox" min="2013-01-01" max="2013-12-31" placeholder="dd/mm/yyyy" data-options='{"mode": "calbox", "useTodayButton": true, "overrideDateFormat": "%d/%m/%Y", "useFocus": true, "useButton": false, "blackDays": [0,6]}'>
				</div>

				<div data-role="fieldcontain" id="subjectSelect">
					<fieldset data-role="controlgroup">
						<legend>Subject:</legend>
					 	<label for="subject-1" id="subjectlabel-1">Error Loading Data</label>
					 	<input type="radio" name="subjectPicker" class="subjectChoice" id="subject-1" value="subject-1" checked="checked" />
					 	<label for="subject-2" id="subjectlabel-2">Error Loading Data</label>
					 	<input type="radio" name="subjectPicker" class="subjectChoice" id="subject-2" value="subject-2" />
					 	<label for="subject-3" id="subjectlabel-3">Error Loading Data</label>
					 	<input type="radio" name="subjectPicker" class="subjectChoice" id="subject-3" value="subject-3" />
					 	<label for="subject-4" id="subjectlabel-4">Error Loading Data</label>
					 	<input type="radio" name="subjectPicker" class="subjectChoice" id="subject-4" value="subject-4" />
					 	<label for="subject-5" id="subjectlabel-5">Error Loading Data</label>
					 	<input type="radio" name="subjectPicker" class="subjectChoice" id="subject-5" value="subject-5" />
					 	<label for="subject-6" id="subjectlabel-6">Error Loading Data</label>
					 	<input type="radio" name="subjectPicker" class="subjectChoice" id="subject-6" value="subject-6" />
					</fieldset>
				</div>

				<p id="noSubjects">This day has no classes. Please select another date.</p>

				<div data-role="fieldcontain">
					<label for="taskInput">Task Name:</label>
					<input type="text" name="taskInput" id="taskInput" value=""	/>
				</div>

				<div data-role="fieldcontain">
					<label for="detailInput">Extra Details: <small>(optional)</small></label>
					<textarea cols="40" rows="8" name="detailInput" id="detailInput"></textarea>
				</div>
				
				<button type="submit" id="hwSubmit" data-theme="b">Save</button>
			</form>
		</div>
	</div>

	<!--
				db   db db   d8b   db   d8888b. d88888b d888888b  .d8b.  d888888b db      
				88   88 88   I8I   88   88  `8D 88'     `~~88~~' d8' `8b   `88'   88      
				88ooo88 88   I8I   88   88   88 88ooooo    88    88ooo88    88    88      
				88~~~88 Y8   I8I   88   88   88 88~~~~~    88    88~~~88    88    88      
				88   88 `8b d8'8b d8'   88  .8D 88.        88    88   88   .88.   88booo. 
				YP   YP  `8b8' `8d8'    Y8888D' Y88888P    YP    YP   YP Y888888P Y88888P 
																																									-->
	<div data-role="dialog" id="hwdetail">
		<div data-role="header" data-theme="a">
			<h1 id="hwDataStore">Homework Detail</h1>
		</div>
		<div data-role="content">
			<div id="hwDisplaySection">
				<h2 id="hwDName">Eat Some Chocolate</h2>
				<p id="hwDSubject">Subject: Chocolate Eating</p>
				<p id="hwDDue">Due: 42<sup>nd</sup> Awesometober 1999</p>
				<p id="hwDDesc">This is the only homework in this class that we've had all year...</p>
				<div class="ui-grid-b">
					<div class="ui-block-a switchaa"><a href="#" id="hwEditButton" data-role="button" data-theme="c">Edit</a></div>
					<div class="ui-block-b switchab"><a href="#" id="hwDelButton"  data-role="button" data-theme="c">Delete</a></div>
					<div class="ui-block-c switchac"><a href="#" id="hwDoneButton"  data-rel="back" data-role="button" data-theme="b">Done</a></div>
				</div>
			</div>
			<div id="hwEditSection">
				<h2>Edit Homework:</h2>
				<form action="javascript:saveHWEdits()" method="post" id="hwEditForm">
					<div data-role="fieldcontain">
						 <label for="hwEditDateBox">Due Date:</label>
						 <input name="hwEditDateBox" id="hwEditDateBox" type="date" data-role="datebox" min="2013-01-01" max="2013-12-31" placeholder="dd/mm/yyyy" data-options='{"mode": "calbox", "useTodayButton": true, "overrideDateFormat": "%d/%m/%Y", "useFocus": true, "useButton": false, "blackDays": [0,6]}'>
					</div>

					<div data-role="fieldcontain" id="subjectEditSelect">
						<fieldset data-role="controlgroup">
							<legend>Subject:</legend>
						 	<label for="subject-edit-1" id="subjectlabel-edit-1">Error Loading Data</label>
						 	<input type="radio" name="editSubjectPicker" class="subjectEditChoice" id="subject-edit-1" value="subject-edit-1" />
						 	<label for="subject-edit-2" id="subjectlabel-edit-2">Error Loading Data</label>
						 	<input type="radio" name="editSubjectPicker" class="subjectEditChoice" id="subject-edit-2" value="subject-edit-2" />
						 	<label for="subject-edit-3" id="subjectlabel-edit-3">Error Loading Data</label>
						 	<input type="radio" name="editSubjectPicker" class="subjectEditChoice" id="subject-edit-3" value="subject-edit-3" />
						 	<label for="subject-edit-4" id="subjectlabel-edit-4">Error Loading Data</label>
						 	<input type="radio" name="editSubjectPicker" class="subjectEditChoice" id="subject-edit-4" value="subject-edit-4" />
						 	<label for="subject-edit-5" id="subjectlabel-edit-5">Error Loading Data</label>
						 	<input type="radio" name="editSubjectPicker" class="subjectEditChoice" id="subject-edit-5" value="subject-edit-5" />
						 	<label for="subject-edit-6" id="subjectlabel-edit-6">Error Loading Data</label>
						 	<input type="radio" name="editSubjectPicker" class="subjectEditChoice" id="subject-edit-6" value="subject-edit-6" />
						</fieldset>
					</div>

					<p id="noEditSubjects">This day has no classes. Please select another date.</p>

					<div data-role="fieldcontain">
						<label for="taskEditInput">Task Name:</label>
						<input type="text" name="taskEditInput" id="taskEditInput" value=""	/>
					</div>

					<div data-role="fieldcontain">
						<label for="detailEditInput">Extra Details: <small>(optional)</small></label>
						<textarea cols="40" rows="8" name="detailEditInput" id="detailEditInput"></textarea>
					</div>
					
					<div class="ui-grid-a">
						<div class="ui-block-a"><a href="#" id="hwEditCancelButton" data-role="button" data-theme="c">Cancel</a></div>
						<div class="ui-block-b"><button type="submit" id="hwEditSubmit" data-theme="b">Save</button></div>
					</div>
				</form>
			</div>
		</div>
	</div>

	<!--
			 .o88b. db       .d8b.  .d8888. .d8888.   d8888b. d88888b d888888b  .d8b.  d888888b db      
			d8P  Y8 88      d8' `8b 88'  YP 88'  YP   88  `8D 88'     `~~88~~' d8' `8b   `88'   88      
			8P      88      88ooo88 `8bo.   `8bo.     88   88 88ooooo    88    88ooo88    88    88      
			8b      88      88~~~88   `Y8b.   `Y8b.   88   88 88~~~~~    88    88~~~88    88    88      
			Y8b  d8 88booo. 88   88 db   8D db   8D   88  .8D 88.        88    88   88   .88.   88booo. 
			 `Y88P' Y88888P YP   YP `8888Y' `8888Y'   Y8888D' Y88888P    YP    YP   YP Y888888P Y88888P 
			                                                                                            -->
	<div data-role="dialog" id="classdetail">
		<div data-role="header" data-theme="a">
			<h1 id="classDataStore">Class Detail</h1>
		</div>
		<div data-role="content">
			<h2 id="className">Error</h2>
			<p id="classDate">Error</p>
			<p id="classPeriod">Error</p>
			<p id="classHW">Error</p>
			<div class="ui-grid-b">
				<div class="ui-block-a switchaa"><a href="#addhw" id="classEditButton" data-icon="plus" data-role="button" data-theme="c">HW</a></div>
				<div class="ui-block-b switchab"><a href="#" id="classDelButton"  data-role="button" data-theme="c">Delete</a></div>
				<div class="ui-block-c switchac"><a href="#" id="classDoneButton"  data-rel="back" data-role="button" data-theme="b">Done</a></div>
			</div>
		</div>
	</div>
</html>

<!-- End source - holy Dump udder bucket -->